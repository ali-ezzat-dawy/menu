"use strict";(self.webpackChunkmox=self.webpackChunkmox||[]).push([[934],{2934:(qt,v,c)=>{c.r(v),c.d(v,{MenuItemsModule:()=>Dt,routes:()=>F});var u=c(6895),T=c(9299),Y=c(1573),C=c(8739),h=c(6308),p=c(671),r=c(4006),d=c(5938),t=c(4650),m=c(1576),f=c(4859),y=c(4144),g=c(9549);function k(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Name is required"),t.qZA())}let b=(()=>{class o{constructor(e,i,n){this.dialogRef=e,this.category=i,this.fb=n}ngOnInit(){this.form=this.fb.group({category_name:[null,r.kI.required]}),this.category&&this.form.patchValue(this.category)}onSubmit(){this.form.valid&&this.dialogRef.close(this.form.value)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.so),t.Y36(d.WI),t.Y36(r.QS))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-category-dialog"]],decls:19,vars:3,consts:[[1,"header","bg-primary"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],[1,"fw-500","secondary-font"],["autocomplete","off",1,"pt-3",3,"formGroup","ngSubmit"],["mat-dialog-content",""],["fxLayout","row wrap"],["fxFlex","100"],["appearance","outline",1,"w-100"],["matInput","","formControlName","category_name","required",""],[4,"ngIf"],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","warn","type","button","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3),t.qZA()()(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(5,"div",4)(6,"div",5)(7,"div",6)(8,"mat-form-field",7)(9,"mat-label"),t._uU(10,"Name"),t.qZA(),t._UZ(11,"input",8),t.YNc(12,k,2,0,"mat-error",9),t.qZA()()()(),t.TgZ(13,"div",10)(14,"div",11)(15,"button",12),t._uU(16,"Close"),t.qZA(),t.TgZ(17,"button",13),t._uU(18,"Save"),t.qZA()()()()),2&e&&(t.xp6(3),t.hij("",i.category?"Edit":"Add"," Category"),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(8),t.Q6J("ngIf",null==i.form.controls.category_name.errors?null:i.form.controls.category_name.errors.required))},dependencies:[u.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,m.xw,m.Wh,m.yH,f.lW,d.ZT,d.xY,d.H8,y.Nt,g.KE,g.hX,g.TO],styles:[".file-upload[_ngcontent-%COMP%]{position:relative;height:30px;width:100%}.file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;z-index:2;height:30px;cursor:pointer;opacity:0;font-size:0;outline:none;width:100%}"]}),o})();var x=c(7410),A=c(7009),Z=c(3546),I=c(7392),S=c(4850),w=c(266);function J(o,a){1&o&&(t.TgZ(0,"th",17),t._uU(1,"ID"),t.qZA())}function Q(o,a){if(1&o&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.category_order," ")}}function L(o,a){1&o&&(t.TgZ(0,"th",17),t._uU(1,"Name"),t.qZA())}function M(o,a){if(1&o&&(t.TgZ(0,"td",18),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.category_name," ")}}function O(o,a){1&o&&(t.TgZ(0,"th",19),t._uU(1,"Edit"),t.qZA())}function R(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",18)(1,"button",20),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.editCategory(l))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()()()}}function E(o,a){1&o&&(t.TgZ(0,"th",19),t._uU(1,"Remove"),t.qZA())}function B(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",18)(1,"button",21),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.remove(l))}),t.TgZ(2,"mat-icon"),t._uU(3,"delete"),t.qZA()()()}}function H(o,a){1&o&&t._UZ(0,"tr",22)}function z(o,a){1&o&&t._UZ(0,"tr",23)}function P(o,a){1&o&&(t.TgZ(0,"p",24),t._uU(1," No data available "),t.qZA())}const G=function(){return[5,10,25,50]};let j=(()=>{class o{constructor(e,i){this.appService=e,this.snackBar=i,this.displayedColumns=["id","name","edit","remove"]}ngOnInit(){this.getAllCategories()}getAllCategories(){this.appService.getCategories().subscribe(e=>{this.initDataSource(e.allCategories)})}initDataSource(e){this.dataSource=new p.by(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}remove(e){if(-1!==this.dataSource.data.indexOf(e)){const n=this.appService.getTranslateValue("MESSAGE.SURE_DELETE");this.appService.openConfirmDialog("",n).afterClosed().subscribe(s=>{s&&(this.appService.removeCatogery(e.id).subscribe(_=>this.getAllCategories()),this.initDataSource(this.dataSource.data))})}}addCategory(e){this.appService.openDialog(b,e,"theme-dialog").afterClosed().subscribe(n=>{let l="";n&&(this.appService.addCatogery({category_name:n.category_name}).subscribe(()=>{this.getAllCategories()},_=>{console.log(_)}),this.paginator.lastPage(),l="New category "+n.category_name+" added successfully!",this.initDataSource(this.dataSource.data),this.snackBar.open(l,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}))})}editCategory(e){console.log(e),this.appService.openDialog(b,e,"theme-dialog").afterClosed().subscribe(n=>{let l="";n&&(this.appService.editCatogery(e.id,{category_name:n.category_name}).subscribe(()=>{this.getAllCategories()},_=>{console.log(_)}),this.paginator.lastPage(),l="Category "+n.category_name+" edited successfully!",this.initDataSource(this.dataSource.data),this.snackBar.open(l,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.z),t.Y36(A.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-categories"]],viewQuery:function(e,i){if(1&e&&(t.Gf(C.NW,7),t.Gf(h.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:26,vars:6,consts:[[1,"m-2","p-0"],["fxLayout","row wrap","fxLayoutAlign","space-between",1,"w-100","p-2"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-icon-md"],[1,"table-wrapper"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","edit"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","remove"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","py-5 mb-0 text-center",4,"ngIf"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","warn","matTooltip","Remove",3,"click"],["mat-header-row",""],["mat-row",""],[1,"py-5","mb-0","text-center"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1),t._UZ(2,"div"),t.TgZ(3,"button",2),t.NdJ("click",function(){return i.addCategory(null)}),t.TgZ(4,"mat-icon",3),t._uU(5,"add"),t.qZA(),t._uU(6," Add New Category "),t.qZA()(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",4)(9,"table",5),t.ynx(10,6),t.YNc(11,J,2,0,"th",7),t.YNc(12,Q,2,1,"td",8),t.BQk(),t.ynx(13,9),t.YNc(14,L,2,0,"th",7),t.YNc(15,M,2,1,"td",8),t.BQk(),t.ynx(16,10),t.YNc(17,O,2,0,"th",11),t.YNc(18,R,4,0,"td",8),t.BQk(),t.ynx(19,12),t.YNc(20,E,2,0,"th",11),t.YNc(21,B,4,0,"td",8),t.BQk(),t.YNc(22,H,1,0,"tr",13),t.YNc(23,z,1,0,"tr",14),t.qZA(),t.YNc(24,P,2,0,"p",15),t.qZA(),t._UZ(25,"mat-paginator",16),t.qZA()),2&e&&(t.xp6(9),t.Q6J("dataSource",i.dataSource),t.xp6(13),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",i.dataSource&&0===i.dataSource.data.length),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,G)))},dependencies:[u.O5,m.xw,m.Wh,f.lW,f.RK,Z.a8,I.Hw,S.d,C.NW,h.YE,h.nU,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,w.gM],styles:[".file-upload[_ngcontent-%COMP%]{position:relative;height:30px;width:100%}.file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;z-index:2;height:30px;cursor:pointer;opacity:0;font-size:0;outline:none;width:100%}"]}),o})();var U=c(3238),D=c(4385);function W(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"input",26),t.NdJ("change",function(n){t.CHM(e);const l=t.oxw();return t.KtG(l.onSelectFile(n))})("click",function(){t.CHM(e);const n=t.oxw();return t.KtG(n.fileUploadClick())}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("accept",e.acceptTypes)}}function $(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Name is required"),t.qZA())}function K(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Name isn't long enough, minimum of 4 characters"),t.qZA())}function X(o,a){if(1&o&&(t.TgZ(0,"mat-option",27)(1,"span"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(2),t.Oqu(e.category_name)}}function V(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Category is required"),t.qZA())}function tt(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Price is required"),t.qZA())}let q=(()=>{class o{constructor(e,i,n,l,s){this.dialogRef=e,this.menuItem=i,this.appService=n,this.formBuilder=l,this.platformId=s,this.imgUrl="assets/images/others/noimage.png",this.onFileChange=new t.vpe,this.onFileUploadClick=new t.vpe}ngOnInit(){this.form=this.formBuilder.group({product_name:[null,r.kI.compose([r.kI.required,r.kI.minLength(4)])],product_description:[null,r.kI.compose([r.kI.required,r.kI.minLength(4)])],product_price:[null,r.kI.required],user_personal_image:[null,r.kI.required],categoryId:[null,r.kI.required]}),this.menuItem&&(this.form.patchValue({product_name:this.menuItem.name,product_description:this.menuItem.description,product_price:this.menuItem.price,user_personal_image:this.file,categoryId:this.menuItem.categoryId}),this.imgUrl=this.menuItem.image),this.getCategories()}onSelectFile(e){if(this.file=e.target.files[0],e.target.files){let i=new FileReader;i.readAsDataURL(e.target.files[0]),i.onload=n=>{this.imgUrl=n.target.result}}console.log(this.file),this.onFileChange.emit(this.file)}fileUploadClick(){this.onFileUploadClick.emit()}getCategories(){this.appService.getCategories().subscribe(e=>{this.appService.Data.categories=e.allCategories})}deleteFile(){console.log("remove",this.file),this.imgUrl="",this.fileUploadClick()}onSubmit(){let e=new FormData;this.file?(e.append("categoryId",this.form.value.categoryId),e.append("product_name",this.form.value.product_name),e.append("product_price",this.form.value.product_price),e.append("product_description",this.form.value.product_description),e.append("user_personal_image",this.file)):(e.append("categoryId",this.form.value.categoryId),e.append("product_name",this.form.value.product_name),e.append("product_price",this.form.value.product_price),e.append("product_description",this.form.value.product_description)),this.dialogRef.close(e),console.log(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.so),t.Y36(d.WI),t.Y36(x.z),t.Y36(r.QS),t.Y36(t.Lbi))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add-dialog"]],outputs:{onFileChange:"onFileChange",onFileUploadClick:"onFileUploadClick"},decls:46,vars:9,consts:[[1,"header","bg-primary"],["fxLayout","row wrap","fxLayoutAlign","space-between center"],[1,"fw-500","secondary-font"],["autocomplete","off",1,"pt-3",3,"formGroup","ngSubmit"],["mat-dialog-content",""],["fxFlex","100","fxFlex.gt-sm","35",1,"px-2"],[1,"d-block","w-100","mat-elevation-z2",3,"src"],[1,"file-upload","mb-2"],["id","singleFileUploader","type","file","color","primary","class","",3,"accept","change","click",4,"ngIf"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","65",1,"px-2","mt-0"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-3"],["appearance","outline",1,"w-100"],["matInput","","formControlName","product_name","required",""],[4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","35",1,"px-3"],["formControlName","categoryId","required",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","25",1,"px-3"],["matInput","","formControlName","product_price","required",""],["fxFlex","100",1,"px-3"],["matInput","","formControlName","product_description","rows","7"],["mat-dialog-actions",""],["fxLayout","row","fxLayoutAlign","space-between center",1,"w-100"],["mat-raised-button","","color","warn","type","button","mat-dialog-close",""],["mat-raised-button","","color","primary","type","submit"],["id","singleFileUploader","type","file","color","primary",1,"",3,"accept","change","click"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),t._uU(3),t.qZA()()(),t.TgZ(4,"form",3),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.TgZ(5,"div",4)(6,"div",5),t._UZ(7,"img",6),t.TgZ(8,"div",7),t.YNc(9,W,1,1,"input",8),t.TgZ(10,"h3"),t._uU(11,"Upload File"),t.qZA()()(),t.TgZ(12,"div",9)(13,"div",10)(14,"div",9)(15,"div",11)(16,"mat-form-field",12)(17,"mat-label"),t._uU(18,"Name"),t.qZA(),t._UZ(19,"input",13),t.YNc(20,$,2,0,"mat-error",14),t.YNc(21,K,2,0,"mat-error",14),t.qZA()(),t.TgZ(22,"div",15)(23,"mat-form-field",12)(24,"mat-label"),t._uU(25,"Category"),t.qZA(),t.TgZ(26,"mat-select",16),t.YNc(27,X,3,2,"mat-option",17),t.qZA(),t.YNc(28,V,2,0,"mat-error",14),t.qZA()(),t.TgZ(29,"div",18)(30,"mat-form-field",12)(31,"mat-label"),t._uU(32,"Price"),t.qZA(),t._UZ(33,"input",19),t.YNc(34,tt,2,0,"mat-error",14),t.qZA()(),t.TgZ(35,"div",20)(36,"mat-form-field",12)(37,"mat-label"),t._uU(38,"Description"),t.qZA(),t._UZ(39,"textarea",21),t.qZA()()()()()(),t.TgZ(40,"div",22)(41,"div",23)(42,"button",24),t._uU(43," Close "),t.qZA(),t.TgZ(44,"button",25),t._uU(45,"Save"),t.qZA()()()()),2&e&&(t.xp6(3),t.hij(" ",i.menuItem?"Edit":"Add"," Menu Item "),t.xp6(1),t.Q6J("formGroup",i.form),t.xp6(3),t.Q6J("src",i.imgUrl,t.LSH),t.xp6(2),t.Q6J("ngIf",!i.file),t.xp6(11),t.Q6J("ngIf",null==i.form.controls.product_name.errors?null:i.form.controls.product_name.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.product_name.hasError("minlength")),t.xp6(6),t.Q6J("ngForOf",i.appService.Data.categories),t.xp6(1),t.Q6J("ngIf",null==i.form.controls.categoryId.errors?null:i.form.controls.categoryId.errors.required),t.xp6(6),t.Q6J("ngIf",null==i.form.controls.product_price.errors?null:i.form.controls.product_price.errors.required))},dependencies:[u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,m.xw,m.Wh,m.yH,U.ey,f.lW,d.ZT,d.xY,d.H8,y.Nt,g.KE,g.hX,g.TO,D.gD],styles:[".file-upload[_ngcontent-%COMP%]{position:relative;height:30px;width:100%;background-color:#5c9037}.file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;inset:0;z-index:2;height:30px;cursor:pointer;color:#fff;opacity:0;font-size:0;outline:#888;width:100%}"]}),o})();function et(o,a){1&o&&(t.TgZ(0,"th",19),t._uU(1," ID "),t.qZA())}function ot(o,a){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.id," ")}}function it(o,a){1&o&&(t.TgZ(0,"th",19),t._uU(1," Image "),t.qZA())}function at(o,a){if(1&o&&(t.TgZ(0,"td",20),t._UZ(1,"img",21),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Q6J("src",e.image,t.LSH)}}function nt(o,a){1&o&&(t.TgZ(0,"th",19),t._uU(1," Category "),t.qZA())}function rt(o,a){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij("",e.category_name," ")}}function lt(o,a){1&o&&(t.TgZ(0,"th",19),t._uU(1," Name "),t.qZA())}function st(o,a){if(1&o&&(t.TgZ(0,"td",20),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.hij(" ",e.name," ")}}function ct(o,a){1&o&&(t.TgZ(0,"th",19),t._uU(1," Price "),t.qZA())}function pt(o,a){if(1&o&&(t.TgZ(0,"td",20)(1,"b",22),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.xp6(2),t.Oqu(e.price)}}function mt(o,a){1&o&&(t.TgZ(0,"th",23),t._uU(1," Actions "),t.qZA())}function dt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"td",20)(1,"a",24),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.openEditItemDialog(l))}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.TgZ(4,"button",25),t.NdJ("click",function(){const l=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.remove(l))}),t.TgZ(5,"mat-icon"),t._uU(6,"delete"),t.qZA()()()}}function ut(o,a){1&o&&t._UZ(0,"tr",26)}function gt(o,a){1&o&&t._UZ(0,"tr",27)}function ft(o,a){1&o&&(t.TgZ(0,"p",28),t._uU(1,"No data available"),t.qZA())}const _t=function(){return[5,10,25,50]};let ht=(()=>{class o{constructor(e,i,n){this.appService=e,this.formBuilder=i,this.snackBar=n,this.displayedColumns=["id","image","categoryId","name","price","actions"]}ngOnInit(){this.getMenuItems()}getAllCategories(){this.appService.getCategories().subscribe(e=>{this.appService.Data.categories=e.allCategories},e=>{console.log("error",e)})}getData(e){let i=[];for(let n=0;n<e.length;n++){let l={...e[n],image:"data:image/jpeg;base64,"+this._arrayBufferToBase64(e[n].image.data)};i.push(l)}this.initDataSource(i)}_arrayBufferToBase64(e){for(var i="",n=new Uint8Array(e),l=n.byteLength,s=0;s<l;s++)i+=String.fromCharCode(n[s]);return i}getMenuItems(){this.appService.getMenuItems().subscribe(e=>{this.initDataSource(e.allProducts),this.getData(e.allProducts)})}initDataSource(e){this.dataSource=new p.by(e),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}openAddItemDialog(e){this.appService.openDialog(q,e,"theme-dialog").afterClosed().subscribe(n=>{console.log("Add",n);let l="";n&&(this.appService.addItem(n).subscribe(s=>{console.log(e),this.getMenuItems()},s=>{console.log(s)}),this.paginator.lastPage(),l="New Item "+n.product_name+" added successfully!",this.initDataSource(this.dataSource.data),this.snackBar.open(l,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}))})}openEditItemDialog(e){console.log(e),this.appService.openDialog(q,e,"theme-dialog").afterClosed().subscribe(n=>{console.log("edit",n),console.log(e.id),console.log("edit",e);let l="";n&&(this.appService.editItem(e.id,n).subscribe(s=>{console.log(s),this.getMenuItems()},s=>{console.log(s)}),this.paginator.lastPage(),l="Edit Item "+e.name+" Edited successfully!",this.initDataSource(this.dataSource.data),this.snackBar.open(l,"\xd7",{panelClass:"success",verticalPosition:"top",duration:3e3}))})}remove(e){if(-1!==this.dataSource.data.indexOf(e)){const n=this.appService.getTranslateValue("MESSAGE.SURE_DELETE");this.appService.openConfirmDialog("",n).afterClosed().subscribe(s=>{s&&(this.appService.removeItem(e.id).subscribe(_=>{console.log(_),this.getMenuItems()},_=>{console.log(_)}),this.initDataSource(this.dataSource.data))})}}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.z),t.Y36(r.QS),t.Y36(A.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-list"]],viewQuery:function(e,i){if(1&e&&(t.Gf(C.NW,7),t.Gf(h.YE,7)),2&e){let n;t.iGM(n=t.CRH())&&(i.paginator=n.first),t.iGM(n=t.CRH())&&(i.sort=n.first)}},decls:32,vars:6,consts:[[1,"m-2","p-0"],["fxLayout","row wrap","fxLayoutAlign","space-between center",1,"w-100","p-2"],["mat-raised-button","","color","primary",3,"click"],[1,"mat-icon-md"],[1,"table-wrapper"],["mat-table","","matSort","",1,"w-100",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","image"],["matColumnDef","categoryId"],["matColumnDef","name"],["matColumnDef","price"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","py-5 mb-0 text-center",4,"ngIf"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["alt","item","width","60",3,"src"],[1,"primary-color"],["mat-header-cell",""],["mat-icon-button","","color","primary","matTooltip","Edit",3,"click"],["mat-icon-button","","color","warn","matTooltip","Remove",3,"click"],["mat-header-row",""],["mat-row",""],[1,"py-5","mb-0","text-center"]],template:function(e,i){1&e&&(t.TgZ(0,"mat-card",0)(1,"div",1),t._UZ(2,"div"),t.TgZ(3,"button",2),t.NdJ("click",function(){return i.openAddItemDialog(null)}),t.TgZ(4,"mat-icon",3),t._uU(5,"add"),t.qZA(),t._uU(6," Add New Item"),t.qZA()(),t._UZ(7,"mat-divider"),t.TgZ(8,"div",4)(9,"table",5),t.ynx(10,6),t.YNc(11,et,2,0,"th",7),t.YNc(12,ot,2,1,"td",8),t.BQk(),t.ynx(13,9),t.YNc(14,it,2,0,"th",7),t.YNc(15,at,2,1,"td",8),t.BQk(),t.ynx(16,10),t.YNc(17,nt,2,0,"th",7),t.YNc(18,rt,2,1,"td",8),t.BQk(),t.ynx(19,11),t.YNc(20,lt,2,0,"th",7),t.YNc(21,st,2,1,"td",8),t.BQk(),t.ynx(22,12),t.YNc(23,ct,2,0,"th",7),t.YNc(24,pt,3,1,"td",8),t.BQk(),t.ynx(25,13),t.YNc(26,mt,2,0,"th",14),t.YNc(27,dt,7,0,"td",8),t.BQk(),t.YNc(28,ut,1,0,"tr",15),t.YNc(29,gt,1,0,"tr",16),t.qZA(),t.YNc(30,ft,2,0,"p",17),t.qZA(),t._UZ(31,"mat-paginator",18),t.qZA()),2&e&&(t.xp6(9),t.Q6J("dataSource",i.dataSource),t.xp6(19),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(1),t.Q6J("ngIf",i.dataSource&&0===i.dataSource.data.length),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(5,_t)))},dependencies:[u.O5,m.xw,m.Wh,f.lW,f.o6,f.RK,Z.a8,I.Hw,S.d,C.NW,h.YE,h.nU,p.BZ,p.fO,p.as,p.w1,p.Dz,p.nj,p.ge,p.ev,p.XQ,p.Gk,w.gM]}),o})();var Ct=c(3081);function xt(o,a){if(1&o&&(t.TgZ(0,"div",25),t._UZ(1,"img",26),t.qZA()),2&o){const e=a.$implicit;t.xp6(1),t.Q6J("src",e.content,t.LSH)}}function Zt(o,a){1&o&&t._UZ(0,"img",27)}function yt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"input",28),t.NdJ("change",function(n){t.CHM(e);const l=t.oxw(2);return t.KtG(l.fileChange(n))}),t.qZA()}if(2&o){const e=t.oxw(2);t.Q6J("accept",e.acceptTypes)}}function vt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",29),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.fileUploadClick())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.UPLOAD")))}function Tt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const n=t.oxw(2);return t.KtG(n.deleteFile())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&o&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"BTN.REMOVE")))}function bt(o,a){if(1&o&&(t.TgZ(0,"div",18)(1,"div",4),t.YNc(2,xt,2,1,"div",19),t.YNc(3,Zt,1,0,"img",20),t.qZA(),t.TgZ(4,"div",21),t.YNc(5,yt,1,1,"input",22),t.YNc(6,vt,3,3,"button",23),t.YNc(7,Tt,3,3,"button",24),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Udp("min-height",132,"px"),t.xp6(1),t.Q6J("ngForOf",e.files),t.xp6(1),t.Q6J("ngIf",!e.file),t.xp6(2),t.Q6J("ngIf",!e.file),t.xp6(1),t.Q6J("ngIf",!e.file),t.xp6(1),t.Q6J("ngIf",e.file)}}function At(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Name is required"),t.qZA())}function It(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Name isn't long enough, minimum of 4 characters"),t.qZA())}function St(o,a){if(1&o&&(t.TgZ(0,"mat-option",31)(1,"span"),t._uU(2),t.qZA()()),2&o){const e=a.$implicit;t.Q6J("value",e.id),t.xp6(2),t.Oqu(e.category_name)}}function wt(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Category is required"),t.qZA())}function Ut(o,a){1&o&&(t.TgZ(0,"mat-error"),t._uU(1,"Price is required"),t.qZA())}let N=(()=>{class o{constructor(e,i,n,l){this.appService=e,this.formBuilder=i,this.activatedRoute=n,this.platformId=l,this.showImage=!1,this.onFileChange=new t.vpe,this.onFileUploadClick=new t.vpe,this.fileSize=500}ngOnInit(){this.base64&&this.file.push({name:"image-"+(new Date).getDate,content:this.base64,size:null}),this.form=this.formBuilder.group({product_name:[null,r.kI.compose([r.kI.required,r.kI.minLength(4)])],product_description:[null,r.kI.compose([r.kI.required,r.kI.minLength(4)])],product_price:[null,r.kI.required],user_personal_image:[null,r.kI.required],categoryId:[null,r.kI.required]}),this.getCategories(),this.sub=this.activatedRoute.params.subscribe(e=>{e.id?(this.id=e.id,this.getMenuItemById()):this.showImage=!0})}ngOnDestroy(){this.sub.unsubscribe()}getCategories(){this.appService.Data.categories.length||this.appService.getCategories().subscribe(e=>{this.appService.Data.categories=e.allCategories})}getMenuItemById(){this.appService.getMenuItemById(this.id).subscribe(e=>{this.form.patchValue(e),(0,u.NF)(this.platformId)&&this.appService.convertImgToBase64(e.user_personal_image.medium,i=>{this.showImage=!0,this.form.controls.user_personal_image.patchValue(i.toString())})})}fileChange(e){this.file=e.target.files[0],console.log(this.file)}onSubmit(){let e=new FormData;e.append("categoryId",this.form.value.categoryId),e.append("product_name",this.form.value.product_name),e.append("product_price",this.form.value.product_price),e.append("product_description",this.form.value.product_description),e.append("user_personal_image",this.file),this.appService.addItem(e).subscribe(i=>{console.log(i)},i=>{console.log(i)})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.z),t.Y36(r.QS),t.Y36(T.gz),t.Y36(t.Lbi))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-add"]],inputs:{fileSize:"fileSize",acceptTypes:"acceptTypes"},outputs:{onFileChange:"onFileChange",onFileUploadClick:"onFileUploadClick"},decls:35,vars:7,consts:[[1,"p-2"],["autocomplete","off","fxLayout","row wrap",3,"formGroup","ngSubmit"],["fxFlex","100","fxFlex.gt-sm","35","class","px-2",4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","65",1,"px-2","mt-0"],["fxLayout","row wrap"],["fxFlex","100","fxFlex.gt-sm","40",1,"px-3"],["appearance","outline",1,"w-100"],["matInput","","formControlName","product_name","required",""],[4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","35",1,"px-3"],["formControlName","categoryId","required",""],[3,"value",4,"ngFor","ngForOf"],["fxFlex","100","fxFlex.gt-sm","25",1,"px-3"],["matInput","","formControlName","product_price","required",""],["fxFlex","100",1,"px-3"],["matInput","","formControlName","product_description","rows","7"],["fxFlex","100",1,"mt-2","text-center","w-100"],["mat-raised-button","","color","primary","type","submit",1,"uppercase"],["fxFlex","100","fxFlex.gt-sm","35",1,"px-2"],["class","w-100",4,"ngFor","ngForOf"],["src","assets/images/others/noimage.png","class","d-block w-100 mat-elevation-z2",4,"ngIf"],[1,"file-upload","mb-2"],["id","singleFileUploader","type","file",3,"accept","change",4,"ngIf"],["mat-raised-button","","color","primary","class","uppercase w-100","value","upload file","type","button",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","class","uppercase w-100","type","button",3,"click",4,"ngIf"],[1,"w-100"],["alt","image",1,"d-block","w-100","mat-elevation-z2",3,"src"],["src","assets/images/others/noimage.png",1,"d-block","w-100","mat-elevation-z2"],["id","singleFileUploader","type","file",3,"accept","change"],["mat-raised-button","","color","primary","value","upload file","type","button",1,"uppercase","w-100",3,"click"],["mat-raised-button","","color","warn","type","button",1,"uppercase","w-100",3,"click"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"mat-card")(2,"mat-card-content")(3,"form",1),t.NdJ("ngSubmit",function(){return i.onSubmit()}),t.YNc(4,bt,8,7,"div",2),t.TgZ(5,"div",3)(6,"div",4)(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"Name"),t.qZA(),t._UZ(11,"input",7),t.YNc(12,At,2,0,"mat-error",8),t.YNc(13,It,2,0,"mat-error",8),t.qZA()(),t.TgZ(14,"div",9)(15,"mat-form-field",6)(16,"mat-label"),t._uU(17,"Category"),t.qZA(),t.TgZ(18,"mat-select",10),t.YNc(19,St,3,2,"mat-option",11),t.qZA(),t.YNc(20,wt,2,0,"mat-error",8),t.qZA()(),t.TgZ(21,"div",12)(22,"mat-form-field",6)(23,"mat-label"),t._uU(24,"Price"),t.qZA(),t._UZ(25,"input",13),t.YNc(26,Ut,2,0,"mat-error",8),t.qZA()(),t.TgZ(27,"div",14)(28,"mat-form-field",6)(29,"mat-label"),t._uU(30,"Description"),t.qZA(),t._UZ(31,"textarea",15),t.qZA()(),t.TgZ(32,"div",16)(33,"button",17),t._uU(34," Submit "),t.qZA()()()()()()()()),2&e&&(t.xp6(3),t.Q6J("formGroup",i.form),t.xp6(1),t.Q6J("ngIf",i.showImage),t.xp6(8),t.Q6J("ngIf",null==i.form.controls.product_name.errors?null:i.form.controls.product_name.errors.required),t.xp6(1),t.Q6J("ngIf",i.form.controls.product_name.hasError("minlength")),t.xp6(6),t.Q6J("ngForOf",i.appService.Data.categories),t.xp6(1),t.Q6J("ngIf",null==i.form.controls.categoryId.errors?null:i.form.controls.categoryId.errors.required),t.xp6(6),t.Q6J("ngIf",null==i.form.controls.product_price.errors?null:i.form.controls.product_price.errors.required))},dependencies:[u.sg,u.O5,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,m.xw,m.yH,U.ey,f.lW,Z.a8,Z.dn,y.Nt,g.KE,g.hX,g.TO,D.gD,Ct.X$],styles:[".file-upload[_ngcontent-%COMP%]{position:relative;height:30px;width:100%}.file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{position:absolute;z-index:2;height:30px;cursor:pointer;opacity:0;font-size:0;outline:none;width:100%}"]}),o})();const F=[{path:"",redirectTo:"list",pathMatch:"full"},{path:"categories",component:j,data:{breadcrumb:"Categories"}},{path:"list",component:ht,data:{breadcrumb:"Menu Items"}},{path:"add",component:N,data:{breadcrumb:"Add Menu Item"}},{path:"add/:id",component:N,data:{breadcrumb:"Edit Menu Item"}}];let Dt=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[u.ez,T.Bz.forChild(F),Y.m]}),o})()}}]);